<!DOCTYPE html>
<html lang="en">
<head>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BrainBox Med - Medical Simulator: Train Your Brain. Master Medicine</title>
  <!-- Metadados essenciais -->
<meta name="description" content="BrainboxMed is an interactive multilingual medical quiz platform to train, review, and master Intensive Care Medicine.">
<meta name="keywords" content="medicina, medicine, simulado, mock tests, intensivismo, intensive care, intensive care medicine, critical care, critical care medicine, quiz médico, medical quiz, brainboxmed, usmle, medicina intensiva, ECMO, neuro, neurology, neurosurgery, cardio, cardiology, infecto, infectious diseases, ventilation, mechanical ventilation, nephrology, nephro, nefrologia, sedation, sedação, anestesia, anesthesia, pediatria, pediatrics, urgência, emergência, emergency medicine, urgência e emergência, nutritional therapy, terapia nutricional, terapia intensiva, intensive therapy, pancreatitis, pancreatite, dialysis, diálise, non-invasive ventilation">
<meta name="author" content="BrainboxMed Team">
<meta name="language" content="en">

<!-- Metadados Open Graph para compartilhamento -->
<meta property="og:title" content="BrainboxMed – Train your brain. Master medicine.">
<meta property="og:description" content="Simulados interativos e multilíngues para dominar medicina intensiva. Dinâmico e focado na prática.">
<meta property="og:image" content="https://seudominio.com/assets/img/preview.png"> <!-- ou omita por enquanto -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://seudominio.com"> <!-- ajustar futuramente -->

<!-- Compatibilidade e dispositivos -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Poppins:wght@600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/css/style.css">

</head>

<body oncontextmenu="return false;">
  <main>
    <div style="text-align: center; margin-bottom: 20px;">

<a href="#" onclick="confirmReturnHome(); return false;">
  <img src="logo-brainboxmed.png" alt="BrainboxMed Logo" loading="lazy" style="max-width: 250px; cursor: pointer;">
</a>
</div>
   <div style="text-align: center; margin-top: 10px;">
       <p style="font-family: 'Inter', sans-serif; color: #666; font-size: 14px;">
      Train your brain. Master medicine.
    </p>
  </div>

  <!-- Tela Inicial -->
<section id="home-screen" role="region" aria-label="Home screen">
    <p style="text-align: center; margin-bottom: 30px;">Intensive Care Medicine Simulator</p>
    
    <div class="mode-selector">
      <button class="mode-btn active" onclick="setMode('study')">Study Mode</button>
      <button class="mode-btn" onclick="setMode('exam')">Exam Mode</button>
    </div>
    
    <div id="exam-settings" style="display: none; text-align: center;">
      <label style="font-weight: bold;">Total Time (minutes): 
        <input type="number" id="exam-time" min="1" value="60" style="padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
      </label>
     <label style="font-weight: bold; margin-left: 30px;">
  Number of Questions:
  <input type="number" id="exam-questions" min="10" max="100" value="50" style="padding: 8px; border: 1px solid #ddd; border-radius: 4px; width: 80px;">
</label>
 
    </div>
    
    <div style="text-align: center; margin-top: 30px;">
      <button class="btn btn-primary" onclick="startQuiz()" style="background-color: var(--color-primary);">Start Quiz</button>
      <button class="btn btn-secondary" onclick="showConfig()">Settings</button>
    </div>
  </section>

  <!-- Tela de Configurações -->
<section id="config-screen" role="region" aria-label="Configuration screen" style="display: none;">
    <h2 style="color: #005b94;">Settings</h2>
    <div style="margin: 20px 0;">
      <label for="language-selector" style="display: block; margin-bottom: 8px; font-weight: bold;">Language:</label>
      <select id="language-selector" style="padding: 8px; width: 100%; max-width: 200px; border: 1px solid #ddd; border-radius: 4px;">
        <option value="en" selected>English</option>
        <option value="es">Español</option>
        <option value="pt">Português</option>
      </select>
    </div>
    
    <div style="margin-top: 30px;">
      <button class="btn btn-secondary" onclick="saveConfig()">Save Settings</button>
      <button class="btn btn-secondary" onclick="hideConfig()">Cancel</button>
    </div>
  </section>

  <!-- Tela de Questões -->
<section id="question-container" role="region" aria-label="Quiz interface" style="display: none;">
    <div id="timer-container" style="text-align: center; display: none;">
      <div id="timer">60:00</div>
      </div>

    <div class="progress-container">
      <div class="progress-bar">
        <div class="progress" id="quiz-progress"></div>
      </div>
      <div class="progress-text" id="progress-text">Question 1 of 50</div>
    </div>
    
    <h2 id="question-text" style="color: var(--color-primary);"></h2>
    <div id="options-container" class="options"></div>
    
    <div class="controls">
      <button id="prev-btn" class="btn btn-secondary" onclick="prevQuestion()">Previous</button>
      <button id="mark-btn" class="btn btn-highlight" onclick="togglePending()">Mark for Review</button>
      <button id="next-btn" class="btn btn-primary" onclick="nextQuestion()">Next</button>
    </div>
    
    <div id="explanation" style="margin-top: 30px; padding: 15px; background-color: #f8f9fa; border-radius: 6px; display: none;">
      <h3 style="margin-top: 0; color: #005b94;">Explanation:</h3>
      <p id="explanation-text"></p>
    </div>
  </section>

  <!-- Tela de Resultado -->
<section id="result-screen" role="region" aria-label="Results report" style="display: none;">
      <div style="background: #005b94; color: white; padding: 20px; text-align: center; border-radius: 6px 6px 0 0;">
      <h2 style="margin: 0;" id="report-title">PERFORMANCE REPORT</h2>
      <p style="margin: 5px 0; font-size: 0.9em;">Generated on <span id="report-date"></span></p>
    </div>

   <!-- Tela de Relatório Completo -->
 <div id="full-report-screen">
  <div class="report-header">
    <h2 id="full-report-title">Relatório Completo</h2>
    <p id="full-report-date"></p>
  </div>
  
  <div id="full-report-stats" class="quick-stats">
    <!-- ... (conteúdo novo) ... -->
  </div>

  <div id="full-report-questions" class="question-list"></div>

  <div class="report-controls">
    <button class="btn btn-secondary" onclick="backToMainReport()">
      < Voltar ao Relatório
    </button>
    <button class="btn btn-secondary" onclick="window.print()">Imprimir Relatório</button>
  </div>
</div>

  <!-- Tela de Relatório de Questões Pendentes -->
 <div id="pending-report-screen" style="display: none; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); margin: 20px 0;">
  <div class="report-header">
    <h2 id="pending-report-title">Questions for Review</h2>
    <p id="pending-report-date"></p>
  </div>

  <div id="pending-questions-container"></div>

  <div class="report-controls" style="text-align: center; margin-top: 30px;">
  <button class="btn btn-secondary" onclick="backToMainReport()">← Back to Report</button>
  <button class="btn btn-secondary" onclick="confirmReturnHome()" style="background-color: var(--color-primary); margin-left: 10px;">
    ← Return to Home Page
  </button>
</div>

</div>

<h3 style="text-align: center; margin-top: 40px; color: #005b94;">Gráficos de Desempenho</h3>
<canvas id="chart-dificuldade" width="800" height="400" style="margin: 30px auto; display: none;"></canvas>
<canvas id="chart-tempo" width="800" height="300" style="margin: 30px auto; display: block;"></canvas>
    <!-- Seção 1: Performance Geral -->
    <div class="report-section" style="border-left-color: var(--color-primary);">
      <h3 id="general-performance-title" style="color: var(--color-primary);">▌ General Performance</h3>
      <div style="display: flex; align-items: center; gap: 20px;">
        <div style="flex: 1;">
          <p><span id="score-text">Score: 0/0</span></p>
          <p>Correct Percentage: <strong><span id="percentage">0</span>%</strong></p>
        </div>
        <div style="flex: 2;">
          <div style="height: 20px; background: #ecf0f1; border-radius: 10px; margin: 10px 0; position: relative;">
            <div id="score-bar" style="height: 100%; width: 0%; background: linear-gradient(to right, var(--color-highlight), var(--color-primary)); border-radius: 10px;"></div>
            <div style="position: absolute; top: -20px; left: 70%; border-left: 1px dashed #333; height: 25px; width: 1px;"></div>
          </div>
          <p style="text-align: center; margin-top: -10px; font-size: 0.8em; color: var(--color-text);">Expected average: 70%</p>
        </div>
      </div>
    </div>
    
    <!-- Seção 2: Análise por Domínio -->
    <div class="report-section strength">
      <h3 id="strengths-title">▌ Strengths & Weaknesses</h3>
      <table>
        <thead>
          <tr>
            <th id="domain-header">Domain</th>
            <th style="text-align: center;" id="performance-header">% Correct</th>
            <th style="text-align: center;" id="status-header">Status</th>
          </tr>
        </thead>
        <tbody id="sw-body">
          <!-- Preenchido dinamicamente -->
        </tbody>
      </table>
    </div>
    
    <!-- Seção 3: Análise por Dificuldade -->
    <div class="report-section" style="border-left-color: var(--color-primary);">
<h3 id="difficulty-title" style="color: var(--color-primary);">▌ Performance by Difficulty</h3>
      <table>
        <thead>
          <tr>
            <th id="level-header">Level</th>
            <th style="text-align: center;" id="questions-header">Questions</th>
            <th style="text-align: center;" id="correct-header">% Correct</th>
          </tr>
        </thead>
        <tbody id="difficulty-body">
          <!-- Preenchido dinamicamente -->
        </tbody>
      </table>
    </div>
    
    <!-- Seção 4: Recomendações -->
    <div class="report-section" style="border-left-color: #27ae60; background-color: #f0f9f0;">
      <h3 id="recommendations-title" style="color: #27ae60;">▌ Study Recommendations</h3>
      <ul id="materials-list" style="padding-left: 20px;">
        <!-- Preenchido dinamicamente -->
      </ul>
    </div>
    
   <!-- Seção 5: Questões Pendentes -->
<div class="report-section weakness">
  <h3 id="pending-title" style="cursor: pointer; color: var(--color-highlight);" onclick="window.location.href='review.html'">
  Questions for Review
</h3>
  <ul id="pending-questions-list" style="padding-left: 0; list-style: none;">
      <!-- Preenchido dinamicamente -->
  </ul>
</div>


<!-- Botões de Controle -->
 <div id="pending-questions-section"></div>
<div style="text-align: center; margin-top: 30px;">
  <button id="restart-btn" class="btn btn-secondary" onclick="restartQuiz()">Restart Test</button>
  <button id="print-btn" class="btn btn-secondary" style="background-color: var(--color-neutral);" onclick="window.print()">Print Report</button>
  <button class="btn btn-secondary" onclick="confirmReturnHome()" style="background-color: var(--color-primary); margin-left: 10px;">
    ← Voltar à Página Inicial
  </button>
</div>
</section>
</main>
<p id="legal-warning" style="text-align:center; font-size: 12px; color: #999; margin-top: 40px;"></p>
     <!-- Scripts -->
<script src="banco-questoes.js" defer></script>
<script src="relatorio.js" defer></script>
<script src="assets/js/script.js" defer></script>
</body>
</html>